@name S1_funs
if(first()){
#include "s1/libs/funcs/io/S1_IO"
    function string shortenID(S:string){
        if(S:lower():find("steam_0:0:")){
            return httpUrlEncode(S:lower():replace("steam_0:0:",""))
        }elseif(S:lower():find("steam_1:0:")){
            return httpUrlEncode(S:lower():replace("steam_1:0:",""))
        }elseif(S:lower():find("steam_0:1:")){
            return httpUrlEncode(S:lower():replace("steam_0:1:",""))
        }
    }
    function void array:appendString(S:string){
        This[This:count()+1,string] = S
    }
    function void appendString(A:array,S:string){
        A[A:count()+1,string] = S
    }
    function void array:appendNum(N){
        This[This:count()+1,number] = N
    }
    function void appendString(A:array,N){
        A[A:count()+1,number] = N
    }
    function number patchNum1(A:string,B:string){
        local D = ""+A+""+B+""
        return D:toNumber()
    }
    function number patchNum2(A:string,B:string,C:string){
        local D = ""+A+""+B+""+C+""
        return D:toNumber()
    }
    function void appReg(S:string,Des:string){
        Apps[S,string] = Des
    }
    function number whatsLarger(N,N2){
        if(N>=N2){
            return N
        }elseif(N2>=N){
            return N2
        }
    }
    function void loadAppCFig(Stri:string){
        runOnFile(1)
        printColor(vec(225,0,0),"Trying to load app '"+Stri+"s' configuration file.")
        fileLoad(Stri:lower()+".txt")
        if(fileLoaded()){
            printColor(vec(0,255,0),"Load succesful")
            B = fileRead()
            Cfig = B:explode(" = ")
        }else{
            printColor(vec(255,0,0),"Failed to load, file doesn't exist?")
        }
    }
    function entity closestPly(){
        findByClass("player")
        return findClosest(entity():pos())   
    }
    function void wirelink:getAvatar(){
        Avatar = Data_split[15,string]
        #Avatar = ""
        if(Avatar == "0" | Avatar == ""){
            This:egpMaterial(patchNum1(Data_split[4+1,string],Data_split[4+6,string]),"gui/center_gradient")
            This:egpBox(Data_split[4+5,string]:toNumber(),vec2(Cx,Cy-10),vec2(60,60)) #Hat tope
            This:egpBox(Data_split[4+6,string]:toNumber(),vec2(Cx,Cy+patchNum1(Data_split[4+2,string],Data_split[4+10,string])),vec2(90,10)) #Hat bottom
            This:egpColor(Data_split[4+5,string]:toNumber(),vec(20,20,20))
            This:egpColor(Data_split[4+6,string]:toNumber(),vec(20,20,20))
        }else{
        This:egpMaterial(patchNum1(Data_split[4+1,string],Data_split[4+6,string]),""+Avatar)
        } 
    }
function void wirelink:keyboard(){
    
}
function void wirelink:drawGui(A){
    if(A == 1){
        This:egpRemove(1)
        This:egpRemove(2)
        This:egpRemove(3)
        This:egpCircle(patchNum1(Data_split[4+1,string],Data_split[4+7,string]),Cords,vec2(76,76)) #Hat Bground [.]
        This:egpCircle(Data_split[4+4,string]:toNumber(),Cords,vec2(75,75)) #Hat Bground [.]
        This:egpCircle(patchNum1(Data_split[4+1,string],Data_split[4+2,string]),Cords,vec2(65,65)) #Hat Bground2 [.]
        This:egpRoundedBox(patchNum1(Data_split[4+2,string],Data_split[4+3,string]),vec2(256,Cy+55),vec2(60,480)) #Hori bar stuff [.]
        This:egpRoundedBox(patchNum1(Data_split[4+1,string],Data_split[4+9,string]),vec2(256,Cy),vec2(482,70)) #Hori bar stuff [.]
        This:egpCircle(patchNum1(Data_split[4+1,string],Data_split[4+3,string]),Cords,vec2(62,62)) #Hat Bground blue ring [.]
        This:egpRoundedBox(patchNum1(Data_split[4+2,string],Data_split[4+10,string]),vec2(256,Cy),vec2(478,66)) #Hori bar stuff [.]
        This:egpRoundedBox(patchNum1(Data_split[4+2,string],Data_split[4+1,string]),vec2(256,Cy),vec2(476,64)) #Hori bar stuff [.]
        This:egpCircle(patchNum1(Data_split[4+1,string],Data_split[4+4,string]),Cords,vec2(61,61)) #Hat Bground2
        This:egpCircle(patchNum1(Data_split[4+1,string],Data_split[4+5,string]),Cords,vec2(61,61)) #Hat Bground2
        This:egpCircle(patchNum1(Data_split[4+1,string],Data_split[4+6,string]),Cords,vec2(59,59)) #Hat Bground2
        This:egpRoundedBox(patchNum1(Data_split[4+2,string],Data_split[4+5,string]),vec2(256,Cy-5),vec2(10,400)) #Hori line stuff
        This:egpRoundedBox(patchNum1(Data_split[4+2,string],Data_split[4+2,string]),vec2(256,Cy+20),vec2(5,474)) #Hori line stuff
        
        This:egpAngle(patchNum1(Data_split[4+2,string],Data_split[4+2,string]),90)
        This:egpAngle(patchNum1(Data_split[4+2,string],Data_split[4+3,string]),270)
        This:egpAngle(patchNum1(Data_split[4+2,string],Data_split[4+5,string]),90)
        
        This:egpMaterial(Data_split[4+4,string]:toNumber(),"gui/center_gradient") #Hori-bar 
        This:egpMaterial(patchNum1(Data_split[4+1,string],Data_split[4+5,string]),"gui/center_gradient") #Hori-bar 
        This:egpMaterial(patchNum1(Data_split[4+1,string],Data_split[4+6,string]),"gui/center_gradient") #Hori-bar 
        This:egpMaterial(patchNum1(Data_split[4+2,string],Data_split[4+2,string]),"gui/center_gradient") #Hori-bar 
        This:egpMaterial(patchNum1(Data_split[4+2,string],Data_split[4+3,string]),"models/props_combine/combine_fenceglow") #Hori-bar 
        This:egpMaterial(patchNum1(Data_split[4+2,string],Data_split[4+5,string]),"gui/center_gradient") #Hori-bar 
        
        This:egpColor(Data_split[4+1,string]:toNumber(),vec(99,99,99))
        This:egpColor(Data_split[4+2,string]:toNumber(),vec(120,0,0))
        This:egpColor(Data_split[4+3,string]:toNumber(),vec(99,99,99))
        This:egpColor(Data_split[4+4,string]:toNumber(),vec(99,99,99))
        This:egpColor(Data_split[4+7,string]:toNumber(),vec(0,0,0))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+2,string]),vec(60,60,60))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+3,string]),vec(0,0,120))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+4,string]),vec(40,40,60))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+5,string]),vec(20,20,20))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+6,string]),vec(30,30,30))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+7,string]),vec(60,60,60))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+8,string]),vec(30,30,30))
        This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+9,string]),vec(60,60,60))
        This:egpColor(patchNum1(Data_split[4+2,string],Data_split[4+10,string]),vec(0,0,120))
        This:egpColor(patchNum1(Data_split[4+2,string],Data_split[4+1,string]),vec(40,40,60))
        This:egpColor(patchNum1(Data_split[4+2,string],Data_split[4+2,string]),vec(50,50,50))
        This:egpColor(patchNum1(Data_split[4+2,string],Data_split[4+3,string]),vec4(120,0,0,220))
        This:egpColor(patchNum1(Data_split[4+2,string],Data_split[4+5,string]),vec4(120,0,0,20))
        This:getAvatar()
        print(This:egpNumObjects())
    }
}
    function void wirelink:updateTitle(A){
        if(A == 1){
            This:egpText(patchNum1(Data_split[4+1,string],Data_split[4+10,string]),"Current application: "+App,vec2(Apvx,Apvy))
            This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+10,string]),vec(255,255,255))
        }elseif(A == 2){
            This:egpText(patchNum1(Data_split[4+1,string],Data_split[4+10,string]),"System idling",vec2(Apvx,Apvy)) 
            This:egpColor(patchNum1(Data_split[4+1,string],Data_split[4+10,string]),vec(255,0,0)) 
        }elseif(A == 3){
        }
    }
    function void playTheme(){
            if(Data_split[16,string] != "0"){
                entity():soundPlay(2,90,""+Data_split[16,string])
        }
    }
    function string getInfo(){
        if(httpCanRequest()){
            httpRequest("http://felthatters.net/smf/qinfo.php?userid="+shortenID(closestPly():steamID()))
            if(httpClk()){
                Cl_data = httpData()
                return Cl_data
            }
        }
    }
    function void wirelink:etc(I,S:string,V:vector2,Z){
        This:egpText(I,S,V)
        This:egpSize(I,Z)
        This:egpAlign(I,1,1)
    }
    function number entity:touching(W:wirelink,I){
        local Y1 = W:egpPos(I):y()-(W:egpSize(I):y()/2)
        local X1 = W:egpPos(I):x()-(W:egpSize(I):x()/2)
        local Y2 = W:egpPos(I):y()+(W:egpSize(I):y()/2)
        local X2 = W:egpPos(I):x()+(W:egpSize(I):x()/2)
        local Vpos = W:egpCursor(This)
        if(inrange(Vpos,vec2(X1,Y1),vec2(X2,Y2))){
            return 1
        }else{
            return 0
        }
    }
}
if(duped()){
 selfDestruct()   
}
